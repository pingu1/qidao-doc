---
description: >-
  Este tutorial cobrirá algumas soluções DeFi oferecidas pela Jarvis para
  pessoas que desejam investir com ativos sintéticos atrelados a moedas
  fiduciárias diferentes do dólar.
---

# De Finanças Tradicionais ao DeFi com Jarvis

Nem todas as stablecoins são iguais. Para a maioria dos usuários de DeFi (Finanças Descentralizadas), stablecoins representam uma criptomoeda atrelada ao dólar americano. É o caso de ativos como:

* USDC ou USDT emitidos por entidades centralizadas e lastreados em dólares americanos
* Ativos com garantia em excesso, como DAI ou MAI, que são levemente atrelados ao U.D. dólar, mas apoiados por uma cesta de diferentes criptomoedas&#x20;
* Stablecoins algorítmicas como UST ou MIM que são parcialmente apoiadas e para as quais o peg de $1 é mantido usando um algoritmo específico

Mas você sabia que pode encontrar outras stablecoins? Como exemplo, o TOMB é um token atrelado ao preço FTM (o token de gás nativo da rede Fantom) usando algoritmos.&#x20;

Neste artigo, focaremos em stablecoins atreladas a FIATs (moedas emitidas pelo governo) e tentaremos explicar por que elas são importantes para suas estratégias de investimento.

![](../../.gitbook/assets/Jarvis-0.png)

{% hint style="info" %}
Tenha em mente que uma estratégia que funciona bem em um determinado momento pode ter um desempenho ruim (ou fazer você perder dinheiro) em outro momento. Por favor, mantenha-se informado, monitore os mercados, fique de olho em seus investimentos e, como sempre, faça sua própria pesquisa.
{% endhint %}

## Por que precisamos de dinheiro sintético?

Vamos considerar que você mora em um país europeu e usa o Euro diariamente. Se você fosse comprar criptoativos, provavelmente os compraria com seus euros. Para ativos voláteis como o Bitcoin, isso realmente não importa, porque você se concentrará no preço do Bitcoin em euros para avaliar se está ou não ganhando dinheiro. E esperançosamente, você vai fazer alguns.

Mas e se você quiser investir em DeFi e produzir farming? E se, para mitigar os riscos, você quiser fornecer liquidez usando apenas stablecoins? A maior parte da liquidez de stablecoins em muitas redes é fornecida como ativos indexados ao USD, o que significa que você terá que comprar USDC/USDT/DAI/MAI usando seus Euros. Neste ponto, você deve verificar se a liquidez que você fornece está gerando juros, mas também se a diferença de preço entre o dólar americano e o euro não está trabalhando contra você.

![EUR/USD durante o último ano](../../.gitbook/assets/Jarvis-1.png)

Se você comprou 100€ de USDC no dia 20 de setembro de 2021, você teria $117,29 de USDC porque a relação EUR:USD era de 1:1,1729 naquele momento. Se você converter $117,29 de USDC em Euros hoje (24 de março de 2022) com uma proporção de 1:1,0994, obterá 106,69€, ou um ganho de 6,69%.

Mas se você comprou CAD 100 (100 dólares canadenses) de USDC no mesmo dia (20 de setembro de 2021) com uma proporção de 1:0,7796, você teria $77,96 de USDC. Convertê-los hoje para CAD com uma proporção de 1:0,7972 valeria CAD 97,79, ou uma perda de 2,21%.

No entanto, 1 CAD sempre é igual a 1 CAD, não importa o que aconteça, como 1 USD = 1 USD e 1 EUR = 1 EUR.

Cada moeda de cada país varia de acordo com a situação geopolítica, política interna e internacional, decisões micro e macroeconômicas. É por isso que você precisa ficar atento à variação de preços de seus ativos de criptomoedas, mesmo que sejam "estáveis".

## Rede Jarvis e Mt. Pelerin

### O que é a Rede Jarvis

[Rede Jarvis](https://jarvis.network/) é um aplicativo especializado que permite aos usuários [trocarem seus criptoativos](https://app.jarvis.exchange/) por moedas fiduciárias (FIAT) sintéticas. Um FIAT sintético é uma criptomoeda atrelada ao preço de um FIAT existente. Como tal, Jarvis permitirá que você troque seus USDCs por:

* jCAD: a versão cripto do dólar canadense
* jEUR: a versão cripto do Euro
* jJPY: a versão criptográfica do iene japonês
* jSGD, jCHF, jGBP, e muitas outras

Como tal, Jarvis é realmente uma Forex On-Chain (Foreign Exchange, Agência de Câmbio) que está ao vivo na Ethereum Mainnet, mas também na Polygon, BNB Chain, Gnosis Chain e Avalanche.

Mas não para por aí. Jarvis propõe pools de liquidez incentivados que incluem jFIATs. Isso é feito para atrair usuários para depositar seus jFIATs e obter rendimentos em suas stablecoins (com a capacidade de depositar um único ativo por meio de pools da Curve), ajudar outros protocolos que oferecem stablecoins sem ter muita liquidez e facilitar para usuários DeFi aumentarem seus ganhos.

![Pools de liquidez em Jarvis a partir de março de 2022](../../.gitbook/assets/Jarvis-2.png)

{% hint style="info" %}
Você pode ver na captura de tela acima que o par 2CAD é composto por jCAD e CADC. O token CADC é na verdade outra versão do dólar canadense fornecida pela [DFX](https://app.dfx.finance/), outra solução Forex descentralizada.
{% endhint %}

### Mt. Pelerin

[Mt. Pelerin](https://www.mtpelerin.com/bridge-wallet) é uma mesa OTC fiat-cripto sem custódia. Ela permite que os usuários comprem criptomoedas diretamente de sua conta bancária e os depositem diretamente em sua carteira de criptomoedas. Também é um parceiro direto da Jarvis e permite comprar jFIATs.

{% hint style="info" %}
A maneira mais fácil de usar o Mt. Pelerin é através do aplicativo móvel Bridge Wallet. Observe que, por ser um serviço centralizado, você terá que fornecer informações pessoais para provar sua identidade se quiser usar o serviço. Você também precisa ter um banco que permita fazer transferências bancárias para a Suíça. No entanto, sempre é possível usar o site deles no qual você encontrará um widget que permite comprar criptomoedas por transferência bancária ou cartão de crédito. Isso não está sujeito a nenhum KYC, mas tem algumas limitações. Observe que, ao usar o site, sua compra será enviada diretamente para sua carteira web. No restante deste guia, apresentaremos a solução Bridge Wallet.
{% endhint %}

![Comprar alguns jEUR com uma transferência bancária em EUR](../../.gitbook/assets/Jarvis-3.png)

As transferências bancárias podem estar sujeitas a taxas e provavelmente levarão algum tempo para serem concluídas, mas no geral, o Mt. Pelerin permite que você compre e venda facilmente seus FIATs sintéticos por suas contrapartes FIAT. Eles também têm uma [estrutura de taxas](https://www.mtpelerin.com/pricing) internas que você pode estudar com mais detalhes e, dependendo do ativo que você comprar, poderá comprar e vender até $100.000 por ano gratuitamente.

![Vendendo um pouco jCAD para minha conta bancária](../../.gitbook/assets/Jarvis-6.png)

{% hint style="info" %}
Se você comprou jFIATs, sua conta bancária é automaticamente vinculada à sua conta Bridge Wallet e você poderá selecioná-la na lista suspensa de destinatários. Caso contrário, terá de criar uma nova conta a partir de um IBAN.
{% endhint %}

### Vincule sua carteira Polygon à sua conta Mt. Pelerin (endereço da carteira Bridge)

Vincular sua carteira à sua conta Mt. Pelerin / Bridge Wallet é muito fácil. Você só precisa:&#x20;

* Abra a guia Endereços na parte inferior
* Clique em `Link an address`
* Tire uma foto do código QR da sua carteira Polygon ou copie e cole o endereço completo no campo
* Envie alguns MATICs para o endereço da Bridge Wallet para validá-lo

![](../../.gitbook/assets/Jarvis-5.png)

![Vinculando minhas carteiras Polygon ao meu aplicativo Mt. Pelerin](../../.gitbook/assets/Jarvis-4.png)

{% hint style="info" %}
Mais uma vez, você pode usar o widget no site da Mt. Pelerin para comprar e vender suas criptomoedas usando sua carteira da web (ou carteira de hardware) diretamente sem usar a Bridge Wallet. Consulte o site da Mt. Pelerin.
{% endhint %}

### Enviando jFIATs para sua carteira Polygon

Enviar seus jFIATs para sua carteira na Polygon (ou em qualquer rede suportada) é muito fácil. Na guia Wallet, verifique se você está na rede que deseja usar como destino e carregue suas moedas do jWallet.

![Enviando jCAD à Polygon](../../.gitbook/assets/Jarvis-8.png)

Depois de selecionar o jFIAT que deseja enviar, basta clicar em enviar, preencher os diferentes campos, iniciar a transação e desfrutar de baixo gás e processamento rápido!

{% hint style="info" %}
Você pode obter uma recapitulação completa de todas as suas transações na seção de atividades de cada jFIAT, bem como na guia Atividade na tela principal.
{% endhint %}

![Verificando se recebi meu jCAD no DeBank.com](../../.gitbook/assets/Jarvis-7.png)

{% hint style="success" %}
Mt. Pelerin é uma solução muito boa para comprar e vender criptomoedas e FIATs sintéticos. Mas você também pode usar este serviço para enviar dinheiro para seus amigos e familiares se eles também estiverem usando o aplicativo e possivelmente contornar transferências bancárias complexas ou limitações.
{% endhint %}

## Getting the best of your stable jFIATs

You have synthetic FIATs on Polygon, so now we need a clever way to use them. In the intro, we saw that it may be a better idea to use them as-is instead of swapping them (selling them) for USD-pegged stable coins.

Think also about this scenario: you have Canadian dollars and want a little bit of exposure to Ethereum. Wouldn't it be nice if you could buy Ethereum without taking the risk of actually buying it? Well, this is what lending markets are for !!!

### Market.xyz

[Market.xyz](https://www.market.xyz/) is a lending protocol where you will be able to use some of your crypto assets as collateral to borrow other assets. They recently launched a new pool 100% dedicated to Jarvis synthetic FIATs: https://polygon.market.xyz/pool/7.

![Jarvis Forex locked on Market.xyz as of March 2022](../../.gitbook/assets/Jarvis-9.png)

As you can see, you can lend your jFIATs and earn interest from borrowers. The locker also accepts some LP (**L**iquidity **P**roviding) tokens as collateral. This means that you can lend your m2CAD or m2JPY and still earn \~27% APY (**A**nnual **P**ercentage **Y**ield) on them, and borrow other jFIATs like jCAD or jJPY to leverage your position. You can also borrow some MAI, the USD-pegged stable coin created by the QiDAO protocol behind Mai Finance. The QiDAO community agreed to provide new MAI on a regular basis to maintain a low interest rate on MAI loans from the Jarvis locker on Market.xyz.

{% hint style="danger" %}
There's a minimum borrowing amount of 0.05 ETH on Market.xyz lockers, which is equivalent to $150 as of March 2022. Since you need to keep a healthy Collateral to Debt Ratio, make sure that you deposit enough collateral if you want to take a loan on the platform.
{% endhint %}

As for any lending platform on Polygon, Market.xyz will enforce a healthy Collateral to Debt Ratio. This is what the LTV of each collateral represents (**L**oan **T**o **V**alue, the inverse of the CDR). As an example, the LTV of m2CAD is 60%, meaning that the ratio between your debt and your collateral value needs to remain above 60%.

In the case of m2CAD, the collateral is pegged to the Canadian Dollar which can vary compared to the MAI you will borrow (pegged to the US dollar). However, the variation is very small, so you can in theory borrow very close to the threshold of 60%. For our guide, we will try to stick to a CDR of 200%, which corresponds to a LTV of 0.4 (1 / 2.5 = 0.5). To be able to borrow the required 0.05 ETH worth of MAI, we will need a collateral value of

$$
AvailableCollateral = \frac{Debt Value}{LTV} = \frac{0.05 ETH}{0.4} = 300\$
$$

Since today the USD:CAD ratio is 1:0.7972, I will need an initial investment of

$$
InvestmentCAD = \frac{300}{0.7972} = 376.32 CAD
$$

{% hint style="info" %}
Assuming I invest $300 worth of CAD and borrow $150 worth of MAI, I will currently earn 27% APY (23.91% APR) on my collateral and will have to pay 11.28% interest on my loan. Over the span of 1 year, that represents a growth of $81 of my collateral and $16.92 worth of interest to pay.
{% endhint %}

Now let's see what to do with your USD-pegged loan.

### Uniswap V3

[Uniswap V3](https://app.uniswap.org/) is the latest version of Uniswap, the parent project of many DEXes (**D**ecentralized **Ex**changes) where users will be able to swap their assets for other cryptocurrencies, as well as provide liquidity to support these swaps.

Uniswap V3 isn't incentivized on Polygon (yet), but offers a new way to provide liquidity: concentrated liquidity! You select the range on which you want to provide liquidity, and if the range is very narrow, you earn more fees than users who provide liquidity on a broader range. You can learn how to provide liquidity pairs on Uniswap V3 with [their official guide](https://help.uniswap.org/en/articles/5391541-provide-liquidity-on-uniswap-v3), and you can also watch the truly amazing [video by Finematics on UniswapV3](https://youtu.be/Ehm-OYBmlPM).

For this tutorial, we will focus on the MAI-USDC pair since we borrowed some MAI and we want to limit risk exposure by farming stable coins.

The first thing to do is to define a target range. Now that the price of MAI is a lot more stable due to ever-increasing liquidity, more pools, and some mechanisms like the Curve pool that help keep the price very stable), we will target a 1:1 rate for MAI:USDC. In reality, 1 MAI is closer to 0.998 USDC.

The expected price range is between 0.99 and 1.01 USDC for 1 MAI, depending on the market conditions. When volatile assets are surging, people have more borrowing power and tend to swap a lot of MAI, decreasing its price. The opposite effect occurs when the market shrinks and people need to repay their loans to prevent liquidation: MAI is bought from the market to repay loans, increasing its price. In fact, the actual price range tends to be between 0.994 and 1.004 USDC per MAI.

![Spreading your LP on a broad or narrow position will have a great impact on the fees you collect](../../.gitbook/assets/Jarvis-10.png)

What you really need to understand though, is

* If you select a broad range, you will collect fewer fees than if you select a narrow range because your liquidity is spread on a bigger range
* If the select a narrow range and the price goes out of that range, you will not collect fees
* Your liquidity is not adjusted based on price. If you select a \[0.99;1.01] range for MAI:USDC and the price of MAI is 0.99 USDC, you will have 100% MAI and 0% USDC. On the other hand, if the price is 1.01 USDC per MAI, you will have 100% USDC and 0% MAI
* You can exit your liquidity pool anytime and create a new one with a broader / narrower range if you see that your first setup isn't collecting enough fees
* For stablecoins, it's better to set a 0.05% fee range so that aggregators like [zapper](https://zapper.fi/) or [1inch](https://app.1inch.io/#/137/) pick your pool when users are swapping their stablecoins

For the simplicity of this guide, we will set a range centered on 1.000 with a 1% spread between 0.995 and 1.005 USDC per MAI.

![Creating a concentrated liquidity pool for MAI-USDC pair](../../.gitbook/assets/Jarvis-11.png)

{% hint style="info" %}
Pay attention to the token order for your pair. Indeed, the price range will not be the same if you select MAI (mimatic) first and USDC second, or USDC first and MAI second !!!
{% endhint %}

Depending on your setup, you can expect between 8% APR (broad range) and 20% APR (narrow range) on your LP paid in MAI and USDC. This will highly depend on the price action and volume of trades operated on UniswapV3. Keep in mind that you can also use this tool to operate your trades with a very low price impact and collect fees from your own trades!

## Farming Strategy

For this strategy, we will be using Jarvis as our starting point. We will be using jCAD bought via Mt. Pelerin for this. The jCAD will be deposited on Curve Finance into the appropriate pool to get a 2CAD LP token. This LP token will be deposited on Beefy so that swap fees and reward tokens provided by Jarvis can compound into additional 2CAD. As a proof of deposit, we will receive mooJarvis2CAD tokens that we can then use on Market.xyz as collateral to borrow some MAI with a CDR of 200% (50% LTV). The MAI loan will be used to create a liquidity-providing token on UniswapV3 so that it can collect swap fees at 12% APR.

This initial setup ensures that you don't get impacted by the price variation of the USD in regard to the CAD. Also, the borrowed amount is secured in the UniswapV3 pool and can be repaid at any time.

Both gains from the 2CAD and the UniswapV3 pools will be added to a "reward booster", i.e. a pool that will have 0 impact on the initial investment or the loan but will actually increase the gains from a high reward rate. You can use pretty much any pool with a reward rate higher than the 2CAD pool. It can be a liquidity pool on QuickSwap like the cxDOGE/cxETH (44.24% APY as of March 2022), or even an ohm-fork like Klima (944% APY as of March 2022). For our simulation, we will be using the JRT-MAY22-USDC pool directly on Jarvis Network. The liquidity can be bought/added on [Kyber Network](https://kyberswap.com/#/add/0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174/0xF5f480Edc68589B51F4217E6aA82Ef7Df5cf789e/0xdaa2c66b06b62bad2e192be0a93f895c855484ee) and uses USDC and a native token from the Jarvis Network. This LP token is currently getting 143% APR.

This strategy is focusing on stable coins, but also presents a lot of possible variations:

* You can use 2JPY or 2SGD if you prefer these FIATs over jCAD
* You can lend your jCAD (or any jFIAT) on Market.xyz and collect borrowing fees from borrowers
* You can swap your loan from Market.xyz into any token for which you will provide liquidity on UniswapV3. Pick the pool you prefer, but pay attention to potential impermanent losses
* You can swap the fees you collect on UniV3 to anything accepted on [Mai Finance](https://app.mai.finance) (BTC, CRV, LINK, GHST ...) and repay your loan on Market.xyz using the loan taken on Mai Finance, actually transferring your loan at 11% into a loan at 0%
* You can also use the fees collected to repay your loan on Market.xyz faster
* Possibilities are endless

As always, we will assume a few things for the simulation:

* The APY for 2CAD is 27% APY (23.91% APR)
* The interest rate for the loan on Market.xyz is 11.28%
* The APR of your position on UniswapV3 is 12% because you make it quite large (more secure but less efficient)
* You will get 143% APR on the JRT-MAY22-USDC reward booster on Jarvis Network

![](../../.gitbook/assets/Jarvis-12.png)

{% hint style="info" %}
If you want to run simulations for this system, you can use the [Google Spreadsheet linked to this strategy](https://docs.google.com/spreadsheets/d/10-n5IyZLl0GZyjM16SNuVOONNsfJ15pm2GL0e2MagzE/edit?usp=sharing). Simply change the different reward rates or desired CDR to estimate the final APY you can get from this loop.
{% endhint %}

### Day 1

You need to bootstrap your system. To do so

* swap $300 worth of USDC for jCAD on Jarvis Network (or purchase jCAD directly via Mt. Pelerin)
* deposit the jCAD on Curve Finance in [pool #23](https://polygon.curve.fi/factory/23/deposit)
* deposit the 2CAD LP token on [beefy finance](https://app.beefy.finance/#/polygon/vault/jarvis-2cad)
* deposit the beefy receipt token on Market.xyz
* borrow MAI with a CDR or 200% (LTV of 50%)
* swap a part of your MAI for USDC on Uniswap V3 and deposit MAI and USDC into a new liquidity pool with parameters of your choice

After the 1st day of farming, you should have

| position       | value ($) |
| -------------- | --------- |
| mooJarvis2CAD  | 300.000   |
| 2CAD rewards   | 0.197     |
| MAI-USDC UniV3 | 150.000   |
| UniV3 fees     | 0.049     |
| JRT-MAY22-USDC | 0.000     |
| Jarvis rewards | 0.000     |
| MAI debt       | 150.000   |

You are all set, the rest is simple maintenance and moving the rewards into the Jarvis pool

### Daily maintenance

Time to put your gains into the reward booster:

* harvest MAI and USDC on Uniswap V3
* extract a small portion of your mooJarvis2CAD corresponding to what has been compounded
* harvest reward on Jarvis Network
* swap everything for JRT-MAY22 and USDC on Kyber Network, and create LP tokens
* deposit the LP token on Jarvis Network

At the end of Day 2, you will have

| position       | value ($) |
| -------------- | --------- |
| mooJarvis2CAD  | 300.000   |
| 2CAD rewards   | 0.197     |
| MAI-USDC UniV3 | 150.000   |
| UniV3 fees     | 0.049     |
| JRT-MAY22-USDC | 0.246     |
| Jarvis rewards | 0.001     |
| MAI debt       | 150.000   |

### Raw results month after month

Here are raw results month after month, as you can get them in the Google SpreadSheet linked above.

| day | mooJarvis2CAD | MAI-USDC | JRT-MAY22-USDC | MAI debt |
| --- | ------------- | -------- | -------------- | -------- |
| 30  | 300.000       | 150.000  | 7.534          | 151.350  |
| 60  | 300.000       | 150.000  | 16.282         | 152.760  |
| 90  | 300.000       | 150.000  | 26.118         | 154.182  |
| 120 | 300.000       | 150.000  | 37.179         | 155.618  |
| 150 | 300.000       | 150.000  | 49.616         | 157.067  |
| 180 | 300.000       | 150.000  | 63.601         | 158.530  |
| 210 | 300.000       | 150.000  | 79.326         | 160.007  |
| 240 | 300.000       | 150.000  | 97.009         | 161.497  |
| 270 | 300.000       | 150.000  | 116.893        | 163.001  |
| 300 | 300.000       | 150.000  | 139.252        | 164.519  |
| 330 | 300.000       | 150.000  | 164.393        | 166.051  |
| 360 | 300.000       | 150.000  | 7.343          | 0.000    |

### Day 365

With a CDR of 200%, you will repay your entire debt during the 11th month, liberating the initial CAD that you can transfer back into your bank account if you want, and you will still have

* $150 worth of MAI-USDC
* $7.343 worth of LP on Jarvis

For a grand total of 52.91% APY.

{% hint style="info" %}
If you take the profits from your 2CAD liquidity pool and invest them directly into the JRT-MAY22-USDC pool on Jarvis, without adding Market.xyz in the middle, you would get a total APY of 52.68%. You can see the 2nd sheet on the Google Spreadsheet for details, or set the CDR to 1,000,000 (no loan).
{% endhint %}

## Disclaimer

This guide has been written mostly to illustrate how you can convert your FIATs into crypto assets (and vice versa) using Mt. Pelerin and Jarvis Network. For non-US residents, this is a very nice opportunity to transfer money from one "world" to the other with very little impact and almost no fees. The fact that you can also get your synthetic FIATs on Polygon makes it particularly efficient since gas cost and transaction time remain among the best for DeFi.

It's also interesting to note that more and more first-grade applications are using jFIATs, especially [AAVE v3](https://app.aave.com/markets/) that started to propose jEUR and EURS lending markets, facilitating the transition from TradFi (**Trad**itional **Fi**nance) to DeFi.

The strategy proposed in this guide, it's assuming all prices and rates remain the same, which is obviously not what happens in real life. Make sure you pay attention to the reward borrowing rates before you invest anything so that you can repay your loan.

{% hint style="info" %}
This guide is definitely not financial advice, it was made with an educational goal in mind. You need to pay attention to price variations, supply and demand, reward programs, end dates, impermanent losses etc ... The goal wasn't to propose recipes that can be followed blindly, so please do your homework and your own simulation, and only invest what you're ready to possibly lose.
{% endhint %}
